<main class="ui-main-container py-5">
    <section class="container">

        @if (!loading && !error && data) {
        <div class="row">
            <div class="col-12 col-lg-8">
                <div class="ui-card p-3 d-flex justify-content-between flex-column flex-md-row">
                    <div class="d-flex align-items-center gap-10">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-calendar w-5 h-5 text-blue-800" aria-hidden="true">
                            <path d="M8 2v4"></path>
                            <path d="M16 2v4"></path>
                            <rect width="18" height="18" x="3" y="4" rx="2"></rect>
                            <path d="M3 10h18"></path>
                        </svg>
                        <div>
                            <p class="subtitle">Reporte</p>
                            <h1 class="title" id="home-report-day">{{data.date | date:'longDate':'':'es'}}</h1>
                        </div>
                    </div>

                    <div class="d-flex align-items-center gap-10 mt-3 mt-md-0" id="home-report-selector">
                        <button class="btn ui-btn-transparent ui-nav-link" type="submit">
                            < Día anterior 
                        </button>
                        <button class="w-max-content btn ui-btn-transparent ui-nav-link" type="submit">Siguiente
                            día >
                        </button>
                    </div>
                </div>

                <div class="ui-main-content-section mt-4">
                    <h1>Reporte del mercado</h1>
                    <hr class="mt-0">
                    <p>Análisis diario de los mercados de criptomonedas y los desarrollos de blockchain que dan
                        forma al panorama de los activos digitales.</p>
                </div>

                <div class="ui-reports-container mt-4">
                    @for (report of data.reports; track report.id; let first = $first) {
                    <div class="ui-card-report p-4" [class.mt-4]="!first">
                        <h1>{{report.title}}</h1>
                        <p class="subtitle">{{report.date}}</p>
                        <p>{{report.content}}</p>
                        <hr>
                        <div class="d-flex justify-content-between" id="home-report-card-details">
                            <button class="btn ui-btn-outline ui-btn-outline-primary" (click)="openReportDetails(report.id)">CONTINUA LEYENDO →</button>

                            <div class="d-flex">

                                <button class="btn ui-btn-outline ui-btn-outline-like">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" class="lucide lucide-thumbs-up w-4 h-4"
                                        aria-hidden="true">
                                        <path d="M7 10v12"></path>
                                        <path
                                            d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z">
                                        </path>
                                    </svg>
                                    <span>{{report.likes}}</span>
                                </button>

                                <button class="btn ui-btn-outline ui-btn-outline-like">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" class="lucide lucide-thumbs-down w-4 h-4"
                                        aria-hidden="true">
                                        <path d="M17 14V2"></path>
                                        <path
                                            d="M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z">
                                        </path>
                                    </svg>
                                    <span>{{report.dislikes}}</span>
                                </button>
                            </div>
                        </div>

                    </div>

                    }
                </div>
            </div>
            <div class="col">
                <!-- card - precios de activos -->
                <div class="ui-card mt-4 mt-lg-0 p-3 d-flex justify-content-between flex-column gap-10">
                    <div class="d-flex flex-column  gap-10">
                        <h1 class="title text-start">Resumen de mercado</h1>
                        <hr class="w-100 mb-3 mt-0">
                    </div>

                    <div class="d-flex justify-content-between">
                        <p class="m-0">BTC/USD</p>
                        <strong class="strong">{{data.BTCPrice | currency:'USD':'symbol'}}</strong>
                    </div>

                    <div class="d-flex justify-content-between">
                        <p class="m-0">ETH/USD</p>
                        <strong class="strong">{{data.ETHPrice | currency:'USD':'symbol'}}</strong>
                    </div>

                </div>
            </div>

        </div>
        } @else if (!loading && error) {
        <div class="alert alert-danger" role="alert">
            Ocurrió un error al cargar el reporte diario. Por favor, inténtalo de nuevo más tarde.
        </div>
        } @else if(loading) {
        <div class="d-flex justify-content-center align-items-center flex-column" style="min-height: 40vh;">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3 text-center">La mejor herramienta que tiene el inversor común <br> es el conocimiento y su
                paciencia.</p>
        </div>
        }

    </section>
</main>